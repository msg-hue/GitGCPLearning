connection string:
psql 'postgresql://neondb_owner:npg_sUvuZSVno8p0@ep-square-grass-a4rx8w2f-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require'

-- ===========================================================
-- Neon schema snapshot (queried via SchemaDump on 2025-11-17)
-- ===========================================================

CREATE TABLE acl (
    roleid         CHAR(10) PRIMARY KEY,
    rolename       VARCHAR(100),
    permissions    TEXT
);

CREATE TABLE activitylog (
    logid          SERIAL PRIMARY KEY,
    userid         CHAR(10),
    action         VARCHAR(255),
    reftype        VARCHAR(50),
    refid          CHAR(10),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE allotment (
    allotmentid    CHAR(10) PRIMARY KEY,
    propertyid     CHAR(10) REFERENCES property(propertyid),
    customerid     CHAR(10) REFERENCES customers(customerid),
    allottedby     CHAR(10),
    allotmentdate  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    approvedby     VARCHAR(50),
    allottmenttype VARCHAR(50),
    workflowstatus VARCHAR(250),
    comments       TEXT,
    additionalinfo TEXT
);

CREATE TABLE approvals (
    approvalid     CHAR(10) PRIMARY KEY,
    reftype        VARCHAR(50),
    refid          CHAR(10),
    approvedby     TEXT,
    status         VARCHAR(50),
    remarks        VARCHAR(255),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE attachments (
    attachmentid   CHAR(10) PRIMARY KEY,
    reftype        VARCHAR(50),
    refid          CHAR(10),
    filepath       VARCHAR(255),
    uploadedby     CHAR(10),
    uploadedat     TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE balloting (
    ballotid       CHAR(10) PRIMARY KEY,
    projectid      CHAR(10) REFERENCES projects(projectid),
    conductedby    CHAR(10),
    conductedat    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    remarks        VARCHAR(255)
);

CREATE TABLE configuration (
    configkey      VARCHAR(50) PRIMARY KEY,
    category       VARCHAR(50),
    configvalue    TEXT,
    description    VARCHAR(255),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updatedat      TIMESTAMP,
    updatedby      CHAR(10)
);

CREATE TABLE customerlogs (
    logid          SERIAL PRIMARY KEY,
    customerid     CHAR(10) REFERENCES customers(customerid),
    action         VARCHAR(150),
    remarks        VARCHAR(255),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    createdby      CHAR(10)
);

CREATE TABLE customers (
    customerid      CHAR(10) PRIMARY KEY,
    regid           VARCHAR(10) REFERENCES registration(regid),
    planid          CHAR(10) REFERENCES paymentplan(planid),
    fullname        VARCHAR(150),
    fathername      VARCHAR(150),
    cnic            VARCHAR(50),
    passportno      VARCHAR(50),
    dob             DATE,
    gender          VARCHAR(20),
    phone           VARCHAR(50),
    email           VARCHAR(150),
    mailingaddress  VARCHAR(255),
    permanentaddress VARCHAR(255),
    city            VARCHAR(100),
    country         VARCHAR(100),
    subproject      VARCHAR(100),
    registeredsize  VARCHAR(50),
    createdat       TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status          VARCHAR(50) DEFAULT 'Active',
    nomineename     VARCHAR(100),
    nomineeid       VARCHAR(50),
    nomineerelation VARCHAR(50),
    additionalinfo  TEXT,
    allotmentstatus VARCHAR(50) DEFAULT 'Not Allotted'
);

CREATE TABLE ndc (
    ndcid          CHAR(10) PRIMARY KEY,
    customerid     CHAR(10) REFERENCES customers(customerid),
    ndctype        VARCHAR(100),
    title          VARCHAR(500),
    workflowstatus VARCHAR(500),
    comments       TEXT,
    issueddate     TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    remarks        VARCHAR(255)
);

CREATE TABLE notifications (
    notificationid CHAR(10) PRIMARY KEY,
    userid         CHAR(10),
    message        VARCHAR(255),
    isread         BOOLEAN DEFAULT FALSE,
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE paymentplan (
    planid         CHAR(10) PRIMARY KEY,
    projectid      CHAR(10),
    planname       VARCHAR(150),
    totalamount    NUMERIC(18,2),
    durationmonths INTEGER,
    frequency      VARCHAR(50),
    description    VARCHAR(255),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE payments (
    paymentid      CHAR(10) PRIMARY KEY,
    scheduleid     CHAR(10),
    customerid     VARCHAR(10) REFERENCES customers(customerid),
    paymentdate    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    amount         NUMERIC(18,2),
    method         VARCHAR(50),
    referenceno    VARCHAR(100),
    status         VARCHAR(250),
    remarks        VARCHAR(255)
);

CREATE TABLE paymentschedule (
    scheduleid        CHAR(10) PRIMARY KEY,
    planid            CHAR(10) REFERENCES paymentplan(planid),
    paymentdescription VARCHAR(250),
    installmentno     INTEGER,
    duedate           DATE,
    amount            NUMERIC(18,2),
    surchargeapplied  BOOLEAN DEFAULT TRUE,
    surchargerate     NUMERIC(18,2) DEFAULT 0.05,
    description       VARCHAR(255)
);

CREATE TABLE penalties (
    penaltyid      CHAR(10) PRIMARY KEY,
    customerid     CHAR(10) REFERENCES customers(customerid),
    amount         NUMERIC(18,2),
    reason         VARCHAR(255),
    appliedon      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE possession (
    possessionid   CHAR(10) PRIMARY KEY,
    propertyid     CHAR(10) REFERENCES property(propertyid),
    customerid     CHAR(10) REFERENCES customers(customerid),
    possessiondate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    workflowstatus VARCHAR(250),
    comments       TEXT,
    remarks        VARCHAR(255)
);

CREATE TABLE projects (
    projectid      CHAR(10) PRIMARY KEY,
    projectname    VARCHAR(150),
    type           VARCHAR(50),
    location       VARCHAR(150),
    description    TEXT,
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE property (
    propertyid     CHAR(10) PRIMARY KEY,
    projectid      CHAR(10) REFERENCES projects(projectid),
    plotno         VARCHAR(50),
    street         VARCHAR(50),
    plottype       VARCHAR(50),
    block          VARCHAR(50),
    propertytype   VARCHAR(50),
    size           VARCHAR(50),
    status         VARCHAR(50) DEFAULT 'Available',
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    additionalinfo TEXT
);

CREATE TABLE propertyinquiry (
    inquiryid      SERIAL PRIMARY KEY,
    fullname       VARCHAR(150) NOT NULL,
    phonenumber    VARCHAR(50) NOT NULL,
    emailaddress   VARCHAR(150),
    inquirytype    VARCHAR(100),
    message        TEXT,
    submittedat    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ipaddress      VARCHAR(50),
    status         VARCHAR(50) DEFAULT 'New',
    assignedto     VARCHAR(100),
    followupdate   TIMESTAMP,
    notes          TEXT,
    iscontacted    BOOLEAN DEFAULT FALSE,
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE refund (
    refundid       CHAR(10) PRIMARY KEY,
    customerid     CHAR(10) REFERENCES customers(customerid),
    amount         NUMERIC(18,2),
    reason         VARCHAR(255),
    status         VARCHAR(50),
    approvedby     CHAR(10),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE registration (
    regid          VARCHAR(10) PRIMARY KEY,
    fullname       VARCHAR(150),
    cnic           VARCHAR(50),
    phone          VARCHAR(50),
    email          VARCHAR(150),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status         VARCHAR(50) DEFAULT 'Pending'
);

CREATE TABLE roles (
    roleid         VARCHAR(10) PRIMARY KEY,
    rolename       VARCHAR(100)
);

CREATE TABLE transfer (
    transferid     CHAR(10) PRIMARY KEY,
    fromcustomerid CHAR(10) REFERENCES customers(customerid),
    tocustomerid   CHAR(10) REFERENCES customers(customerid),
    propertyid     CHAR(10) REFERENCES property(propertyid),
    status         VARCHAR(50),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE users (
    userid         CHAR(10) PRIMARY KEY,
    fullname       VARCHAR(150),
    email          VARCHAR(150),
    passwordhash   VARCHAR(256),
    roleid         VARCHAR(10),
    isactive       BOOLEAN DEFAULT TRUE,
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE usersessions (
    sessionid      CHAR(10) PRIMARY KEY,
    userid         CHAR(10),
    logintime      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    logouttime     TIMESTAMP,
    ipaddress      VARCHAR(50),
    deviceinfo     VARCHAR(150)
);

CREATE TABLE waiver (
    waiverid       CHAR(10) PRIMARY KEY,
    customerid     CHAR(10) REFERENCES customers(customerid),
    amount         NUMERIC(18,2),
    reason         VARCHAR(255),
    approvedby     CHAR(10),
    createdat      TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE __EFMigrationsHistory (
    MigrationId    VARCHAR(150) PRIMARY KEY,
    ProductVersion VARCHAR(32) NOT NULL
);

